<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лабораторная работа №4 - Расчет площади треугольника</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .container {
            max-width: 800px;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            margin: 20px auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #667eea;
        }
        
        h1 {
            color: #2c3e50;
            font-weight: 700;
        }
        
        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
        }
        
        .form-label {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .btn-calculate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 10px;
            color: white;
            width: 100%;
            transition: all 0.3s;
        }
        
        .btn-calculate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .result-section {
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-success {
            background: #d4edda;
            border: 2px solid #c3e6cb;
            color: #155724;
        }
        
        .result-error {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
            color: #721c24;
        }
        
        .formula-box {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
        }
        
        .method-badge {
            background: #6f42c1;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .footer {
            text-align: center;
            color: #6c757d;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #dee2e6;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Лабораторная работа №4</h1>
            <h3>Расчет площади треугольника</h3>
            <p class="text-muted">Использование метода POST для передачи данных на сервер</p>
            <span class="method-badge">HTTP POST Method</span>
        </div>
        
        <!-- Информация о задании -->
        <div class="info-box">
            <h5>📋 Задание:</h5>
            <p>Вычислить площадь треугольника со сторонами A, B, C по формуле Герона.</p>
            <p>Перед вычислением проверить условие существования треугольника.</p>
        </div>
        
        <!-- Формула Герона -->
        <div class="formula-box">
            <h5>📐 Формула Герона:</h5>
            <p>S = √[p × (p - a) × (p - b) × (p - c)]</p>
            <p>где p = (a + b + c) / 2 (полупериметр)</p>
            <p class="mt-2 mb-0"><small>a, b, c - длины сторон треугольника</small></p>
        </div>
        
        <!-- Форма для ввода данных -->
        <div class="form-section">
            <h4>Введите длины сторон треугольника:</h4>
            <form id="triangleForm" method="POST" action="">
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label class="form-label">Сторона A:</label>
                        <input type="number" 
                               class="form-control" 
                               id="side_a" 
                               name="side_a"
                               step="0.01"
                               min="0.01"
                               required
                               placeholder="Например: 5.0">
                        <div class="form-text">Положительное число</div>
                    </div>
                    
                    <div class="col-md-4 mb-3">
                        <label class="form-label">Сторона B:</label>
                        <input type="number" 
                               class="form-control" 
                               id="side_b" 
                               name="side_b"
                               step="0.01"
                               min="0.01"
                               required
                               placeholder="Например: 6.0">
                        <div class="form-text">Положительное число</div>
                    </div>
                    
                    <div class="col-md-4 mb-3">
                        <label class="form-label">Сторона C:</label>
                        <input type="number" 
                               class="form-control" 
                               id="side_c" 
                               name="side_c"
                               step="0.01"
                               min="0.01"
                               required
                               placeholder="Например: 7.0">
                        <div class="form-text">Положительное число</div>
                    </div>
                </div>
                
                <button type="submit" class="btn-calculate">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                    </svg>
                    Вычислить площадь треугольника
                </button>
            </form>
        </div>
        
        <!-- PHP обработка -->
        <?php
        // Функция расчета площади треугольника
        function calculateTriangleArea($a, $b, $c) {
            // Проверка на положительные значения
            if ($a <= 0 || $b <= 0 || $c <= 0) {
                return ['success' => false, 'message' => 'Ошибка: Все стороны должны быть положительными числами!'];
            }
            
            // Проверка существования треугольника
            if (($a + $b <= $c) || ($a + $c <= $b) || ($b + $c <= $a)) {
                return ['success' => false, 'message' => 'Ошибка: Треугольник с такими сторонами не существует!<br>Сумма любых двух сторон должна быть больше третьей.'];
            }
            
            // Расчет площади
            $p = ($a + $b + $c) / 2;
            $area = sqrt($p * ($p - $a) * ($p - $b) * ($p - $c));
            
            return [
                'success' => true,
                'area' => round($area, 4),
                'semiperimeter' => round($p, 2),
                'message' => 'Площадь треугольника успешно рассчитана!'
            ];
        }
        
        // Обработка POST запроса
        $side_a = $side_b = $side_c = '';
        $result = null;
        
        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            $side_a = isset($_POST['side_a']) ? floatval($_POST['side_a']) : 0;
            $side_b = isset($_POST['side_b']) ? floatval($_POST['side_b']) : 0;
            $side_c = isset($_POST['side_c']) ? floatval($_POST['side_c']) : 0;
            
            if ($side_a > 0 && $side_b > 0 && $side_c > 0) {
                $result = calculateTriangleArea($side_a, $side_b, $side_c);
            } else {
                $result = ['success' => false, 'message' => 'Пожалуйста, заполните все поля положительными числами!'];
            }
        }
        ?>
        
        <!-- Вывод результата -->
        <?php if ($result): ?>
            <div class="result-section <?php echo $result['success'] ? 'result-success' : 'result-error'; ?>">
                <h4><?php echo $result['success'] ? '✅ Результат расчета:' : '❌ Ошибка:'; ?></h4>
                <p><strong><?php echo $result['message']; ?></strong></p>
                
                <?php if ($result['success']): ?>
                    <hr>
                    <p><strong>Введенные значения:</strong></p>
                    <p>A = <?php echo $side_a; ?> ед., B = <?php echo $side_b; ?> ед., C = <?php echo $side_c; ?> ед.</p>
                    
                    <p><strong>Полупериметр (p):</strong> <?php echo $result['semiperimeter']; ?> ед.</p>
                    <p><strong>Площадь треугольника (S):</strong> <?php echo $result['area']; ?> кв.ед.</p>
                    
                    <div class="mt-3">
                        <p><strong>Проверка существования треугольника:</strong></p>
                        <ul>
                            <li>A + B > C: <?php echo "$side_a + $side_b > $side_c = " . (($side_a + $side_b > $side_c) ? '✅ Верно' : '❌ Неверно'); ?></li>
                            <li>A + C > B: <?php echo "$side_a + $side_c > $side_b = " . (($side_a + $side_c > $side_b) ? '✅ Верно' : '❌ Неверно'); ?></li>
                            <li>B + C > A: <?php echo "$side_b + $side_c > $side_a = " . (($side_b + $side_c > $side_a) ? '✅ Верно' : '❌ Неверно'); ?></li>
                        </ul>
                    </div>
                <?php endif; ?>
            </div>
        <?php endif; ?>
        
        <!-- Информация о методе POST -->
        <div class="info-box">
            <h5>📡 Информация о методе передачи данных:</h5>
            <p><strong>Используемый метод: POST</strong></p>
            <p>Данные формы отправляются на сервер в теле HTTP-запроса.</p>
            <p><strong>Преимущества метода POST:</strong></p>
            <ul>
                <li>Безопасность - данные не отображаются в URL</li>
                <li>Нет ограничений по объему передаваемых данных</li>
                <li>Можно передавать файлы</li>
                <li>Данные не кэшируются браузером</li>
            </ul>
        </div>
        
        <!-- Проверка существования треугольника -->
        <div class="alert alert-light border mt-4">
            <h5>🔍 Проверка существования треугольника:</h5>
            <p>Треугольник существует только если выполняются все три условия:</p>
            <ul>
                <li>A + B > C</li>
                <li>A + C > B</li>
                <li>B + C > A</li>
            </ul>
            <p class="mb-0">Если хотя бы одно условие не выполняется - треугольника не существует.</p>
        </div>
        
        <div class="footer">
            <p>Лабораторная работа №4 | PHP + Bootstrap 5 | Метод передачи данных: POST</p>
            <p>Дата выполнения: <?php echo date('d.m.Y H:i:s'); ?></p>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Валидация на стороне клиента
        document.getElementById('triangleForm').addEventListener('submit', function(e) {
            const a = parseFloat(document.getElementById('side_a').value);
            const b = parseFloat(document.getElementById('side_b').value);
            const c = parseFloat(document.getElementById('side_c').value);
            
            // Проверка положительных значений
            if (a <= 0 || b <= 0 || c <= 0) {
                alert('Ошибка: Все стороны должны быть положительными числами!');
                e.preventDefault();
                return false;
            }
            
            // Проверка существования треугольника
            if ((a + b <= c) || (a + c <= b) || (b + c <= a)) {
                alert('Ошибка: Треугольник с такими сторонами не существует!\nСумма любых двух сторон должна быть больше третьей стороны.');
                e.preventDefault();
                return false;
            }
            
            return true;
        });
        
        // Заполняем тестовыми данными для быстрой проверки
        document.getElementById('side_a').value = '3';
        document.getElementById('side_b').value = '4';
        document.getElementById('side_c').value = '5';
    </script>
</body>
</html>
